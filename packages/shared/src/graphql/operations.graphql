query HealthCheck {
  health
}

query MySubscriptions($limit: Int, $nextToken: String) {
  mySubscriptions(limit: $limit, nextToken: $nextToken) {
    items {
      showId
      title
      publisher
      image
      addedAt
      ratingStars
      ratingReview
      ratingUpdatedAt
    }
    nextToken
  }
}

query EpisodesByShow($showId: ID!, $limit: Int, $nextToken: String) {
  episodes(showId: $showId, limit: $limit, nextToken: $nextToken) {
    items {
      episodeId
      showId
      title
      audioUrl
      publishedAt
      durationSec
      description
      image
      linkUrl
    }
    nextToken
  }
}

query ShowById($showId: ID!) {
  show(showId: $showId) {
    id
    title
    publisher
    description
    image
    totalEpisodes
    externalUrl
    categories
  }
}

query MySubscriptionByShow($showId: ID!) {
  mySubscription(showId: $showId) {
    showId
    title
    publisher
    image
    addedAt
    ratingStars
    ratingReview
    ratingUpdatedAt
  }
}

query EpisodeDetails($showId: ID!, $episodeId: ID!) {
  episode(showId: $showId, episodeId: $episodeId) {
    showId
    episodeId
    title
    audioUrl
    publishedAt
    durationSec
    description
    image
    linkUrl
  }
}

query EpisodeProgressByIds($episodeIds: [ID!]!) {
  episodeProgress(episodeIds: $episodeIds) {
    episodeId
    positionSec
    completed
    updatedAt
  }
}

query SearchShows($term: String!, $limit: Int, $offset: Int) {
  search(term: $term, limit: $limit, offset: $offset) {
    id
    title
    publisher
    description
    image
    totalEpisodes
  }
}

mutation SubscribeToShow(
  $showId: ID!
  $title: String!
  $publisher: String!
  $image: String!
) {
  subscribe(
    showId: $showId
    title: $title
    publisher: $publisher
    image: $image
  ) {
    showId
    title
    publisher
    image
    addedAt
    ratingStars
    ratingReview
    ratingUpdatedAt
  }
}

mutation UnsubscribeFromShow($showId: ID!) {
  unsubscribe(showId: $showId)
}

mutation RateShow(
  $showId: ID!
  $stars: Int!
  $review: String
) {
  rateShow(showId: $showId, stars: $stars, review: $review) {
    showId
    title
    publisher
    image
    addedAt
    ratingStars
    ratingReview
    ratingUpdatedAt
  }
}

mutation MarkEpisodeProgress(
  $episodeId: ID!
  $positionSec: Int!
  $completed: Boolean!
) {
  markProgress(
    episodeId: $episodeId
    positionSec: $positionSec
    completed: $completed
  ) {
    episodeId
    positionSec
    completed
    updatedAt
  }
}

mutation PublishProgressUpdate(
  $episodeId: ID!
  $positionSec: Int!
  $completed: Boolean!
) {
  publishProgress(
    episodeId: $episodeId
    positionSec: $positionSec
    completed: $completed
  ) {
    episodeId
    positionSec
    completed
    updatedAt
  }
}

subscription OnProgress($episodeId: ID!) {
  onProgress(episodeId: $episodeId) {
    episodeId
    positionSec
    completed
    updatedAt
  }
}

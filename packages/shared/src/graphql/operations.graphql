query HealthCheck {
  health
}

query MySubscriptions($limit: Int, $nextToken: String) {
  mySubscriptions(limit: $limit, nextToken: $nextToken) {
    items {
      showId
      title
      publisher
      image
      addedAt
      totalEpisodes
      ratingStars
      ratingReview
      ratingUpdatedAt
    }
    nextToken
  }
}

query ShowDetail(
  $showId: ID!
  $episodeLimit: Int
  $episodeCursor: String
  $progressEpisodeIds: [ID!]
) {
  showDetail(
    showId: $showId
    episodeLimit: $episodeLimit
    episodeCursor: $episodeCursor
    progressEpisodeIds: $progressEpisodeIds
  ) {
    show {
      id
      title
      publisher
      description
      htmlDescription
      image
      totalEpisodes
      externalUrl
      categories
      explicit
      languages
      availableMarkets
      mediaType
      isSubscribed
    }
    subscription {
      showId
      title
      publisher
      image
      addedAt
      totalEpisodes
      ratingStars
      ratingReview
      ratingUpdatedAt
      subscriptionSyncedAt
    }
    episodes {
      items {
        episodeId
        showId
        title
        audioUrl
        publishedAt
        durationSec
        description
        htmlDescription
        image
        linkUrl
        explicit
        isExternallyHosted
        isPlayable
        releaseDatePrecision
        languages
      }
      nextToken
    }
    progress {
      episodeId
      completed
      updatedAt
      showId
    }
  }
}

query EpisodeDetails($showId: ID!, $episodeId: ID!) {
  episode(showId: $showId, episodeId: $episodeId) {
    showId
    episodeId
    title
    audioUrl
    publishedAt
    durationSec
    description
    htmlDescription
    image
    linkUrl
    explicit
    isExternallyHosted
    isPlayable
    releaseDatePrecision
    languages
  }
}

query SearchShows($term: String!, $limit: Int, $offset: Int) {
  search(term: $term, limit: $limit, offset: $offset) {
    id
    title
    publisher
    description
    htmlDescription
    image
    totalEpisodes
    externalUrl
    categories
    explicit
    languages
    availableMarkets
    mediaType
    isSubscribed
  }
}

mutation SubscribeToShow(
  $showId: ID!
  $title: String!
  $publisher: String!
  $image: String!
  $totalEpisodes: Int
) {
  subscribe(
    showId: $showId
    title: $title
    publisher: $publisher
    image: $image
    totalEpisodes: $totalEpisodes
  ) {
    showId
    title
    publisher
    image
    addedAt
    totalEpisodes
    ratingStars
    ratingReview
    ratingUpdatedAt
  }
}

mutation UnsubscribeFromShow($showId: ID!) {
  unsubscribe(showId: $showId)
}

mutation RateShow($showId: ID!, $stars: Int!, $review: String) {
  rateShow(showId: $showId, stars: $stars, review: $review) {
    showId
    title
    publisher
    image
    addedAt
    totalEpisodes
    ratingStars
    ratingReview
    ratingUpdatedAt
  }
}

mutation MarkEpisodeProgress(
  $episodeId: ID!
  $completed: Boolean!
  $showId: ID
) {
  markProgress(episodeId: $episodeId, completed: $completed, showId: $showId) {
    episodeId
    completed
    updatedAt
    showId
  }
}

mutation MarkNextEpisodeComplete($showId: ID!, $limit: Int) {
  markNextEpisodeComplete(showId: $showId, limit: $limit) {
    episodeId
    completed
    updatedAt
    showId
  }
}

mutation MarkAllEpisodesComplete($showId: ID!) {
  markAllEpisodesComplete(showId: $showId) {
    episodeId
    completed
    updatedAt
    showId
  }
}

mutation PublishProgressUpdate($episodeId: ID!, $completed: Boolean!) {
  publishProgress(episodeId: $episodeId, completed: $completed) {
    episodeId
    completed
    updatedAt
  }
}

subscription OnProgress($episodeId: ID!) {
  onProgress(episodeId: $episodeId) {
    episodeId
    completed
    updatedAt
  }
}

query MyProfile {
  myProfile {
    stats {
      totalShows
      episodesCompleted
      episodesInProgress
    }
    spotlight {
      showId
      title
      publisher
      image
      addedAt
      totalEpisodes
      completedEpisodes
      inProgressEpisodes
      unlistenedEpisodes
      subscriptionSyncedAt
    }
    shows {
      showId
      title
      publisher
      image
      addedAt
      totalEpisodes
      completedEpisodes
      inProgressEpisodes
      unlistenedEpisodes
      subscriptionSyncedAt
    }
  }
}
